<!DOCTYPE html>
<html lang="en">
  <%- include('partials/head.ejs') %>

  <body>
    <%- include('partials/navbar.ejs') %>
    <div class="container py-4">
      <div class="row">
        <div class="col-sm-12">
          <% if(typeof(errors) == 'object' && errors) { %>
            <% errors.forEach((error) => { %>
              <div class="alert alert-danger" role="alert">
                <%= error.msg %>
              </div>
            <% }) %>
          <% } %>
          <% if(messages.length !== 0) { %>
            <% messages.forEach((message) => { %>
              <div class="blog-post">
                <h2 class="blog-post-title"><%= message.title %></h2>
                <% if(typeof(user) == 'object' && user) { %>
                  <p class="blog-post-meta">
                    <%= message.timestamp %> by
                    <a href="#">
                      <%= user.membership_status == 'Admin' ? message.user.first_name : 'Anonymous' %>
                    </a>
                  </p>
                <% } %>
                <p><%= message.text %></p>
              </div>
            <% }) %>
          <% } else { %>
            <h5>No messages :(</h5>
          <% } %>
        </div>
      </div>
    </div>

    <footer class="blog-footer">
      <p>Members Only is &copy; David Ornellas, created as part of The Odin Project curriculum</p>
      <p><a href="http://github.com/ornellasd">Check out my GitHub</a> <i class="fa fa-github"></i></p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    <%- include('sign-up-modal.ejs') %>
    <%- include('log-in-modal.ejs') %>
    <%- include('new-message-modal.ejs') %>
  </body>

</html>
